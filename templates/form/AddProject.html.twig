{% extends 'layout.html.twig' %}
{% block title %}
    {{ parent() }}Ajouter
{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('addProjectImgInput') }}
{% endblock %}
{% block content %}
    {% for message in app.flashes('added') %}
        <div class="flash-notice alert alert-success alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    {% endfor %}
    {% for message in app.flashes('existing') %}
        <div class="flash-notice alert alert-danger alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    {% endfor %}
    {{  form_start(formProject) }}
        <div class="row">
            <div class="col">
                {{ form_row(formProject.projectName) }}
                {{ form_row(formProject.adress) }}
                {{ form_row(formProject.postalCode) }}
                {{ form_row(formProject.city) }}
                {{ form_row(formProject.cost) }}
                {{ form_row(formProject.startedAt) }}
                {{ form_row(formProject.endedAt) }}
                {{ form_row(formProject.statut) }}
{#                {{ form_widget(formProject.imgFile, {'attr': {'class': 'imgProject-button'}}) }}#}
{#                {{ form_label(formProject.imgFile,'Photo du projet' ,{'label_attr' : {'class' : 'imgInput-label btn btn-dark'}})}}#}
            </div>
            <div class="col">
                <div>Entreprise</div>
                <ul class="add-companies" data-prototype="{{ form_widget(formProject.companies.vars.prototype)|e }}">
                </ul>
                <div class="accordion" id="accordionCompanie">
                    <div class="card">
                        <div class="card-header" id="headingCompanie">
                            <h2 class="mb-0">
                                <button class="btn" type="button" data-toggle="collapse" data-target="#collapseCompanie" aria-expanded="true" aria-controls="collapseCompanie">
                                    Ajouter une entreprise non enregistrée.
                                </button>
                            </h2>
                        </div>
                        <div id="collapseCompanie" class="collapse" aria-labelledby="headingCompanie" data-parent="#accordionCompanie">
                            <div class="card-body">
                                <ul class="add-unexisting-companies" data-prototype="{{ form_widget(formProject.unexistingCompanies.vars.prototype)|e }}" style="padding-left: 0px">
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div>Contactes</div>
                <ul class="add-contacts" data-prototype="{{ form_widget(formProject.contacts.vars.prototype)|e }}">
                </ul>
                <div class="accordion" id="accordionContact">
                    <div class="card">
                        <div class="card-header" id="headingContact">
                            <h2 class="mb-0">
                                <button class="btn" type="button" data-toggle="collapse" data-target="#collapseContact" aria-expanded="false" aria-controls="collapseThree">
                                    Ajouter un contact non enregistré.
                                </button>
                            </h2>
                        </div>
                        <div id="collapseContact" class="collapse" aria-labelledby="headingContact" data-parent="#accordionContact">
                            <div class="card-body">
                                <ul class="add-unexisting-contacts" data-prototype="{{ form_widget(formProject.unexistingContacts.vars.prototype)|e }}" style="padding-left: 0px">
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <input type="submit" class="btn btn-dark" value="Enregistrer" />
    {{ form_end(formProject) }}
{% endblock %}
{% block javascripts %}
    {{ parent() }}
{#    {{ encore_entry_script_tags('addProjectImgInput') }}#}
    {{ encore_entry_script_tags('addProjectCompForm') }}
    {{ encore_entry_script_tags('addProjectContForm') }}
    {{ encore_entry_script_tags('addUnexistingCompanieForm') }}
    {{ encore_entry_script_tags('addUnexistingContactForm') }}
{% endblock %}
